import{j as y,u as S,L as C,O as j,a as E,r as h,c as O,b as g,d as L,F as $,e as P,f as b,g as k,B as I,R,h as x,i as T,k as G}from"./vendor.8b701631.js";const q=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function m(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(a){if(a.ep)return;a.ep=!0;const l=m(a);fetch(a.href,l)}};q();const e=y.exports.jsx,s=y.exports.jsxs,v=y.exports.Fragment,_=()=>{const n=S().pathname;return s("div",{className:"md:flex md:min-h-screen",children:[s("div",{className:"md:w-1/4 bg-blue-900 px-5 py-10",children:[e("h2",{className:"text-4xl font-black text-center text-white",children:"CRM - Clientes"}),s("nav",{className:"mt-10 ",children:[e(C,{to:"/clientes",className:`${n==="/clientes"?"text-blue-300":"text-white"}  text-2xl block mt-2 hover:text-blue-300`,children:"Clientes"}),e(C,{to:"/clientes/nuevo",className:`${n==="/clientes/nuevo"?"text-blue-300":"text-white"} text-2xl block mt-2 hover:text-blue-300`,children:"Nuevo Cliente"})]})]}),e("div",{className:"md:w-3/4 p-10 md:h-screen overflow-scroll bg-zinc-50",children:e(j,{})})]})},D=({client:t,handleDelete:n})=>{const{nombre:m,empresa:o,email:a,tel:l,id:r}=t,d=E();return s("tr",{className:"border-b hover:bg-gray-100",children:[e("td",{className:"p-3",children:m}),s("td",{className:"p-3",children:[s("p",{children:[e("span",{className:"text-gray-800 font-bold",children:"Email: "}),a]}),s("p",{children:[e("span",{className:"text-gray-800 font-bold",children:"Tel: "}),l]})]}),e("td",{className:"p-3",children:o}),s("td",{className:"p-3",children:[e("button",{type:"button",className:"bg-yellow-500 hover:bg-yellow-600 block w-full text-white p-2 uppercase font-bold text-xs rounded-md",onClick:()=>d(`/clientes/${r}`),children:"Ver"}),e("button",{type:"button",className:"bg-blue-600 hover:bg-blue-700 block w-full text-white p-2 uppercase font-bold text-xs mt-3 rounded-md",onClick:()=>d(`/clientes/editar/${r}`),children:"Editar"}),e("button",{type:"button",className:"bg-red-600 hover:bg-red-700 block w-full text-white p-2 uppercase font-bold text-xs mt-3 rounded-md",onClick:()=>n(r),children:"Eliminar"})]})]})},B=()=>{const[t,n]=h.exports.useState([]);h.exports.useEffect(()=>{(async()=>{try{const r=await(await fetch("https://my-json-server.typicode.com/ObedSAGA/api_crm/clientes")).json();n(r)}catch(a){console.log(a)}})()},[]);const m=async o=>{if(confirm("\xBFDeseas eliminar este cliente?"))try{const l=`https://my-json-server.typicode.com/ObedSAGA/api_crm/clientes/${o}`;await(await fetch(l,{method:"DELETE"})).json();const d=t.filter(p=>p.id!==o);n(d)}catch(l){console.log(l)}};return s(v,{children:[e("h1",{className:"font-black text-4xl text-blue-900",children:"Clientes"}),e("p",{className:"mt-3",children:"Administra tus clientes"}),s("table",{className:"w-full mt-5 table-auto shadow bg-white",children:[e("thead",{className:"bg-blue-800 text-white",children:s("tr",{children:[e("th",{className:"p-2",children:"Nombre"}),e("th",{className:"p-2",children:"Contacto"}),e("th",{className:"p-2",children:"Empresa"}),e("th",{className:"p-2",children:"Acciones"})]})}),e("tbody",{children:t.map(o=>e(D,{client:o,handleDelete:m},o.id))})]})]})},f=({children:t})=>e("div",{children:e("span",{class:"text-red-500 text-xs italic",children:t})});const A=()=>s("div",{className:"sk-chase",children:[e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"})]}),w=({client:t,loading:n})=>{var l,r,d,p,u;const m=E(),o=O().shape({nombre:g().min(3,"El nombre es muy corto").max(40,"El nombre es muy largo").required("Campo obligatorio"),empresa:g().required("Campo obligatorio"),email:g().email("Email no v\xE1lido").required("Campo obligatorio"),tel:L().integer("N\xFAmero de tel\xE9fono no v\xE1lido").positive("N\xFAmero de tel\xE9fono no v\xE1lido").typeError("N\xFAmero de tel\xE9fono no v\xE1lido")}),a=async i=>{try{let c;if(t.id){const N=`https://my-json-server.typicode.com/ObedSAGA/api_crm/clientes/${t.id}`;c=await fetch(N,{method:"PUT",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}})}else c=await fetch("https://my-json-server.typicode.com/ObedSAGA/api_crm/clientes",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}});await c.json(),m("/clientes")}catch(c){console.log(c)}};return n?e(A,{}):s("div",{className:"bg-white mt-10 px-5 py-10 rounded-md shadow-xl md:w-3/4 mx-auto",children:[e("h1",{className:"text-gray-600 font-bold text-xl uppercase text-center",children:t!=null&&t.nombre?"Editar Cliente":"Agregar Cliente"}),e($,{initialValues:{nombre:(l=t==null?void 0:t.nombre)!=null?l:"",empresa:(r=t==null?void 0:t.empresa)!=null?r:"",email:(d=t==null?void 0:t.email)!=null?d:"",tel:(p=t==null?void 0:t.tel)!=null?p:"",notas:(u=t==null?void 0:t.notas)!=null?u:""},enableReinitialize:!0,onSubmit:async(i,{resetForm:c})=>{await a(i),c()},validationSchema:o,children:({errors:i,touched:c})=>s(P,{className:"mt-10",children:[s("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"nombre",children:"Nombre:"}),e(b,{id:"nombre",type:"text",className:"mt-2 block w-full p-3 bg-gray-50",placeholder:"Nombre del cliente",name:"nombre"}),i.nombre&&c.nombre?e(f,{children:i.nombre}):null]}),s("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"empresa",children:"Empresa:"}),e(b,{id:"empresa",type:"text",className:"mt-2 block w-full p-3 bg-gray-50",placeholder:"Empresa del cliente",name:"empresa"}),i.empresa&&c.empresa?e(f,{children:i.empresa}):null]}),s("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"email",children:"Email:"}),e(b,{id:"email",type:"email",className:"mt-2 block w-full p-3 bg-gray-50",placeholder:"Correo electr\xF3nico",name:"email"}),i.email&&c.email?e(f,{children:i.email}):null]}),s("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"telefono",children:"Tel\xE9fono:"}),e(b,{id:"telefono",type:"tel",className:"mt-2 block w-full p-3 bg-gray-50",placeholder:"N\xFAmero de contacto",name:"tel"}),i.tel&&c.tel?e(f,{children:i.tel}):null]}),s("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"notas",children:"Notas:"}),e(b,{as:"textarea",id:"notas",type:"tel",className:"mt-2 block w-full p-3 bg-gray-50 h-40",placeholder:"Obsevaciones",name:"notas"})]}),e("input",{type:"submit",value:t!=null&&t.nombre?"Guardar cambios":"Agregar Cliente",className:"mt-5 w-full bg-blue-800 p-3 text-white uppercase font-bold text-lg cursor-pointer"})]})})]})};w.defaultProps={client:{},loading:!1};const M=()=>s(v,{children:[e("h1",{className:"font-black text-4xl text-blue-900",children:"Nuevo Cliente"}),e("p",{className:"mt-3",children:"Llena los siguientes campos para registrar un cliente"}),e(w,{})]}),z=()=>{const[t,n]=h.exports.useState({}),[m,o]=h.exports.useState(!0),{id:a}=k();return h.exports.useEffect(()=>{(async()=>{try{const r=`https://my-json-server.typicode.com/ObedSAGA/api_crm/clientes/${a}`,p=await(await fetch(r)).json();n(p)}catch(r){console.log(r)}o(!1)})()},[]),s(v,{children:[e("h1",{className:"font-black text-4xl text-blue-900",children:"Editar Cliente"}),e("p",{className:"mt-3",children:"Utiliza el siguiente formulario para editar la informaci\xF3n del cliente"}),t!=null&&t.nombre?e(w,{client:t,loading:m}):e("p",{className:"mt-3",children:"Cliente ID no v\xE1lido"})]})},U=()=>{const[t,n]=h.exports.useState({}),[m,o]=h.exports.useState(!0),{id:a}=k(),{nombre:l,email:r,empresa:d,tel:p,notas:u}=t;return h.exports.useEffect(()=>{(async()=>{try{const c=`https://my-json-server.typicode.com/ObedSAGA/api_crm/clientes/${a}`,F=await(await fetch(c)).json();n(F)}catch(c){console.log(c)}o(!1)})()},[]),m?e(A,{}):Object.keys(t).length===0?e("p",{children:"No hay resultado"}):s("div",{children:[s("h1",{className:"font-black text-4xl text-blue-900",children:["Cliente: ",l]}),e("p",{className:"mt-3",children:"Informaci\xF3n del cliente"}),s("p",{className:"text-2xl text-gray-700 mt-10",children:[e("span",{className:" font-bold",children:"Cliente: "}),l]}),s("p",{className:"text-2xl text-gray-700 mt-4",children:[e("span",{className:"font-bold",children:"Empresa: "}),d]}),s("p",{className:"text-2xl text-gray-700 mt-4",children:[e("span",{className:"font-bold",children:"Email: "}),r]}),p&&s("p",{className:"text-2xl text-gray-700 mt-4",children:[e("span",{className:"font-bold",children:"Tel\xE9fono: "}),p]}),u&&s("p",{className:"text-2xl text-gray-700 mt-4",children:[e("span",{className:"font-bold",children:"Notas: "}),u]})]})};function V(){return e(I,{children:e(R,{children:s(x,{path:"/clientes",element:e(_,{}),children:[e(x,{index:!0,element:e(B,{})}),e(x,{path:"nuevo",element:e(M,{})}),e(x,{path:"editar/:id",element:e(z,{})}),e(x,{path:":id",element:e(U,{})})]})})})}T.render(e(G.StrictMode,{children:e(V,{})}),document.getElementById("root"));
