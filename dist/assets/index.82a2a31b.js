import{j as y,u as S,L as C,O as j,a as E,r as h,c as O,b as g,d as L,F as $,e as P,f as b,g as k,B as I,R,h as x,i as T,k as G}from"./vendor.8b701631.js";const q=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function m(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=m(s);fetch(s.href,l)}};q();const e=y.exports.jsx,a=y.exports.jsxs,v=y.exports.Fragment,_=()=>{const o=S().pathname;return a("div",{className:"md:flex md:min-h-screen",children:[a("div",{className:"md:w-1/4 bg-blue-900 px-5 py-10",children:[e("h2",{className:"text-4xl font-black text-center text-white",children:"CRM - Clientes"}),a("nav",{className:"mt-10 ",children:[e(C,{to:"/",className:`${o==="/"?"text-blue-300":"text-white"}  text-2xl block mt-2 hover:text-blue-300`,children:"Clientes"}),e(C,{to:"/nuevo",className:`${o==="/nuevo"?"text-blue-300":"text-white"} text-2xl block mt-2 hover:text-blue-300`,children:"Nuevo Cliente"})]})]}),e("div",{className:"md:w-3/4 p-10 md:h-screen overflow-scroll bg-zinc-50",children:e(j,{})})]})},D=({client:t,handleDelete:o})=>{const{nombre:m,empresa:n,email:s,tel:l,id:r}=t,d=E();return a("tr",{className:"border-b hover:bg-gray-100",children:[e("td",{className:"p-3",children:m}),a("td",{className:"p-3",children:[a("p",{children:[e("span",{className:"text-gray-800 font-bold",children:"Email: "}),s]}),a("p",{children:[e("span",{className:"text-gray-800 font-bold",children:"Tel: "}),l]})]}),e("td",{className:"p-3",children:n}),a("td",{className:"p-3",children:[e("button",{type:"button",className:"bg-yellow-500 hover:bg-yellow-600 block w-full text-white p-2 uppercase font-bold text-xs rounded-md",onClick:()=>d(`/${r}`),children:"Ver"}),e("button",{type:"button",className:"bg-blue-600 hover:bg-blue-700 block w-full text-white p-2 uppercase font-bold text-xs mt-3 rounded-md",onClick:()=>d(`/editar/${r}`),children:"Editar"}),e("button",{type:"button",className:"bg-red-600 hover:bg-red-700 block w-full text-white p-2 uppercase font-bold text-xs mt-3 rounded-md",onClick:()=>o(r),children:"Eliminar"})]})]})},B=()=>{const[t,o]=h.exports.useState([]);h.exports.useEffect(()=>{(async()=>{try{const r=await(await fetch("https://my-json-server.typicode.com/ObedSAGA/api_crm/clientes")).json();o(r)}catch(s){console.log(s)}})()},[]);const m=async n=>{if(confirm("\xBFDeseas eliminar este cliente?"))try{const l=`https://my-json-server.typicode.com/ObedSAGA/api_crm/clientes/${n}`;await(await fetch(l,{method:"DELETE"})).json();const d=t.filter(p=>p.id!==n);o(d)}catch(l){console.log(l)}};return a(v,{children:[e("h1",{className:"font-black text-4xl text-blue-900",children:"Clientes"}),e("p",{className:"mt-3",children:"Administra tus clientes"}),a("table",{className:"w-full mt-5 table-auto shadow bg-white",children:[e("thead",{className:"bg-blue-800 text-white",children:a("tr",{children:[e("th",{className:"p-2",children:"Nombre"}),e("th",{className:"p-2",children:"Contacto"}),e("th",{className:"p-2",children:"Empresa"}),e("th",{className:"p-2",children:"Acciones"})]})}),e("tbody",{children:t.map(n=>e(D,{client:n,handleDelete:m},n.id))})]})]})},f=({children:t})=>e("div",{children:e("span",{class:"text-red-500 text-xs italic",children:t})});const A=()=>a("div",{className:"sk-chase",children:[e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"})]}),w=({client:t,loading:o})=>{var l,r,d,p,u;const m=E(),n=O().shape({nombre:g().min(3,"El nombre es muy corto").max(40,"El nombre es muy largo").required("Campo obligatorio"),empresa:g().required("Campo obligatorio"),email:g().email("Email no v\xE1lido").required("Campo obligatorio"),tel:L().integer("N\xFAmero de tel\xE9fono no v\xE1lido").positive("N\xFAmero de tel\xE9fono no v\xE1lido").typeError("N\xFAmero de tel\xE9fono no v\xE1lido")}),s=async i=>{try{let c;if(t.id){const N=`https://my-json-server.typicode.com/ObedSAGA/api_crm/clientes/${t.id}`;c=await fetch(N,{method:"PUT",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}})}else c=await fetch("https://my-json-server.typicode.com/ObedSAGA/api_crm/clientes",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}});await c.json(),m("/clientes")}catch(c){console.log(c)}};return o?e(A,{}):a("div",{className:"bg-white mt-10 px-5 py-10 rounded-md shadow-xl md:w-3/4 mx-auto",children:[e("h1",{className:"text-gray-600 font-bold text-xl uppercase text-center",children:t!=null&&t.nombre?"Editar Cliente":"Agregar Cliente"}),e($,{initialValues:{nombre:(l=t==null?void 0:t.nombre)!=null?l:"",empresa:(r=t==null?void 0:t.empresa)!=null?r:"",email:(d=t==null?void 0:t.email)!=null?d:"",tel:(p=t==null?void 0:t.tel)!=null?p:"",notas:(u=t==null?void 0:t.notas)!=null?u:""},enableReinitialize:!0,onSubmit:async(i,{resetForm:c})=>{await s(i),c()},validationSchema:n,children:({errors:i,touched:c})=>a(P,{className:"mt-10",children:[a("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"nombre",children:"Nombre:"}),e(b,{id:"nombre",type:"text",className:"mt-2 block w-full p-3 bg-gray-50",placeholder:"Nombre del cliente",name:"nombre"}),i.nombre&&c.nombre?e(f,{children:i.nombre}):null]}),a("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"empresa",children:"Empresa:"}),e(b,{id:"empresa",type:"text",className:"mt-2 block w-full p-3 bg-gray-50",placeholder:"Empresa del cliente",name:"empresa"}),i.empresa&&c.empresa?e(f,{children:i.empresa}):null]}),a("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"email",children:"Email:"}),e(b,{id:"email",type:"email",className:"mt-2 block w-full p-3 bg-gray-50",placeholder:"Correo electr\xF3nico",name:"email"}),i.email&&c.email?e(f,{children:i.email}):null]}),a("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"telefono",children:"Tel\xE9fono:"}),e(b,{id:"telefono",type:"tel",className:"mt-2 block w-full p-3 bg-gray-50",placeholder:"N\xFAmero de contacto",name:"tel"}),i.tel&&c.tel?e(f,{children:i.tel}):null]}),a("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"notas",children:"Notas:"}),e(b,{as:"textarea",id:"notas",type:"tel",className:"mt-2 block w-full p-3 bg-gray-50 h-40",placeholder:"Obsevaciones",name:"notas"})]}),e("input",{type:"submit",value:t!=null&&t.nombre?"Guardar cambios":"Agregar Cliente",className:"mt-5 w-full bg-blue-800 p-3 text-white uppercase font-bold text-lg cursor-pointer"})]})})]})};w.defaultProps={client:{},loading:!1};const M=()=>a(v,{children:[e("h1",{className:"font-black text-4xl text-blue-900",children:"Nuevo Cliente"}),e("p",{className:"mt-3",children:"Llena los siguientes campos para registrar un cliente"}),e(w,{})]}),z=()=>{const[t,o]=h.exports.useState({}),[m,n]=h.exports.useState(!0),{id:s}=k();return h.exports.useEffect(()=>{(async()=>{try{const r=`https://my-json-server.typicode.com/ObedSAGA/api_crm/clientes/${s}`,p=await(await fetch(r)).json();o(p)}catch(r){console.log(r)}n(!1)})()},[]),a(v,{children:[e("h1",{className:"font-black text-4xl text-blue-900",children:"Editar Cliente"}),e("p",{className:"mt-3",children:"Utiliza el siguiente formulario para editar la informaci\xF3n del cliente"}),t!=null&&t.nombre?e(w,{client:t,loading:m}):e("p",{className:"mt-3",children:"Cliente ID no v\xE1lido"})]})},U=()=>{const[t,o]=h.exports.useState({}),[m,n]=h.exports.useState(!0),{id:s}=k(),{nombre:l,email:r,empresa:d,tel:p,notas:u}=t;return h.exports.useEffect(()=>{(async()=>{try{const c=`https://my-json-server.typicode.com/ObedSAGA/api_crm/clientes/${s}`,F=await(await fetch(c)).json();o(F)}catch(c){console.log(c)}n(!1)})()},[]),m?e(A,{}):Object.keys(t).length===0?e("p",{children:"No hay resultado"}):a("div",{children:[a("h1",{className:"font-black text-4xl text-blue-900",children:["Cliente: ",l]}),e("p",{className:"mt-3",children:"Informaci\xF3n del cliente"}),a("p",{className:"text-2xl text-gray-700 mt-10",children:[e("span",{className:" font-bold",children:"Cliente: "}),l]}),a("p",{className:"text-2xl text-gray-700 mt-4",children:[e("span",{className:"font-bold",children:"Empresa: "}),d]}),a("p",{className:"text-2xl text-gray-700 mt-4",children:[e("span",{className:"font-bold",children:"Email: "}),r]}),p&&a("p",{className:"text-2xl text-gray-700 mt-4",children:[e("span",{className:"font-bold",children:"Tel\xE9fono: "}),p]}),u&&a("p",{className:"text-2xl text-gray-700 mt-4",children:[e("span",{className:"font-bold",children:"Notas: "}),u]})]})};function V(){return e(I,{children:e(R,{children:a(x,{path:"/",element:e(_,{}),children:[e(x,{index:!0,element:e(B,{})}),e(x,{path:"nuevo",element:e(M,{})}),e(x,{path:"editar/:id",element:e(z,{})}),e(x,{path:":id",element:e(U,{})})]})})})}T.render(e(G.StrictMode,{children:e(V,{})}),document.getElementById("root"));
